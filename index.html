<!doctype html>
<html ng-app="Scheduler">
	<head>
		<title>Portal</title>
		<link rel="stylesheet" href="portal.css" type="text/css" />
	</head>
	<body>
		<header>
			<div id="nav">
				<img src="logo_small.png" alt="Scheduler" /><br />
				<a class="catalog-link" href="#catalog">Browse</a>
				<a class="schedule-link" href="#schedules">Schedule</a>
			</div>
			
			<ul class="view schedule-view">
				<li>
					<span>Saved Schedules</span>
					<ul id="saved-schedules"></ul>
				</li>
			</ul>
			
			<ul id="categories" class="view catalog-view">
				<li><a href="#catalog/saved">Saved Courses</a></li>
			</ul>
		</header>
	
		<div id="main" ng-view></div>

		<template id="template-courses">
			<table id="courses">
				<tr ng-repeat="crs in courses" class="' + (sectionsSaved.length === 0 ? '' : (sectionsSaved.length === crs.sections.length ? 'course-saved' : 'courses-partially-saved')) + '">
					<td class="course-check" data-action="save"></td>
					<td class="course-entry">
						<div class="course-head" ng-click="crs._expanded = !crs._expanded">
							<div class="course-title">
								<b>{{ crs.crs_no.substr(0, 9) }} <span class="crs-{{ crs.crs_no.substr(9, 2) }}">{{ crs.crs_no.substr(9, 2) }}</span> - {{ crs.title }}</b>
								(instructors.length ? ' (<i>' + instructors.join('; ') + '</i>)' : '') + '
							</div>
							<div class="course-abstr" ng-if="crs.abstr">{{ crs.abstr }}</div>
						</div>
						
						<div class="course-details" ng-if="crs._expanded">
							<div class="course-reqs" ng-if="crs.reqs.length"><i>Requirements</i>: <span ng-repeat="req in crs.reqs">[{{ req }}] <span style="font-variant: small-caps" ng-if="!$last">or</span></span></div>
							<table class="sections">
								<tr class="section-row" ng-repeat="sec in crs.sections">
									<td class="section-head">
										<b>Section {{ sec.sec_no }}</b><!--sup>' + reqs.join(',') + '</sup--><br />
										<b style="display: block" ng-if="sec.title">{{ sec.title }}</b>
										<i>instructors.join('<br />')</i>
									</td>
									<td>
										<table class="meetings">
											<tr ng-repeat="mtg in sec.meetings | filter: +mtg.beg_tm == 0 && (+mtg.end_tm == 0 || +mtg.end_tm == 1200)" title="mtg.instructors.map(function (instr) { return instr.join(' '); }).sort().join('; ')">
												<td ng-show="mtg.im !== 'XX'">{{ mtg.im | p_im }}:</td>
												<td>{{ mtg.days | p_days }}</td>
												<td>
													{{ mtg.beg_tm | p_time }}&ndash;{{ mtg.end_tm | p_time:true }}{{ mtg.building || mtg.room ? ',' : '' }} {{ mtg.building }} {{ mtg.room }}
												</td>
											</tr>
										</table>
									</td>
									<td class="section-dates">{{ sec.beg_date }}<br />{{ sec.end_date }}</td>
									<td class="section-numbers">
										<span>enrolled:</span> {{ sec.reg_num }}<br />
										<span>max:</span> {{ sec.reg_max }}
									</td>
									<td class="section-units">{{ (sec.units * (crs.crs_no.substr(9, 2) === 'HM' ? 1 : 3)).toFixed(2) }}</td>
									<td class="section-check"><input type="checkbox" checked /></td>
								</tr>
							</table>
							<div class="course-footnotes">
								footnotes.map(function (footnote, i) {
									return '<sup>' + (i + 1) + '</sup>' + footnote;
								}).join('<br />')
							</div>
						</div>
					</td>
				</td>
			</table>
		</template>
<template>
		<div class="view catalog-browse-view">
			<h1>Welcome to Scheduler.</h1>
			<div>
				Select a category from the left to start picking your courses. Then click Schedule to view your possible schedules.
			</div>
		</div>

		<div class="view schedule-view">
			<div id="controls" class="generated">
				<div id="title">
					<span class="show-generated">Schedule <b id="page-number">1</b> of <b id="page-count">1</b></span>
					<span class="show-saved">Schedule <b id="page-number">1</b> of <b id="page-count">1</b></span>
				</div>
				
				<ul id="actions">
					<li class="show-generated"><a id="schedule-save" href="#">save</a></li>
					<li class="show-saved"><a id="schedule-unsave" href="#">unsave</a></li>
					<li class="show-saved"><a id="schedule-rename" href="#">rename</a></li>
					<!--li><a href="#">export</a></li-->
					<li><a id="schedule-print" href="#">print</a></li>
					<!--li><a id="schedule-share" href="#">share</a></li-->
				</ul>
				
				<ul id="pages">
					<li><a id="page-right" href="#">next</a></li>
					<li><a id="page-left" href="#">previous</a></li>
				</ul>
			</div>
			<table id="schedule">
				<tr>
					<th></th>
					<th>Monday</th>
					<th>Tuesday</th>
					<th>Wednesday</th>
					<th>Thursday</th>
					<th>Friday</th>
				</tr>
				<tr>
					<td>
						<ol>
							<li>8am</li>
							<li>9am</li>
							<li>10am</li>
							<li>11am</li>
							<li>12pm</li>
							<li>1pm</li>
							<li>2pm</li>
							<li>3pm</li>
							<li>4pm</li>
							<li>5pm</li>
							<li>6pm</li>
							<li>7pm</li>
							<li>8pm</li>
							<li>9pm</li>
						</ol>
					</td>
					<td><div class="day"></div></td>
					<td><div class="day"></div></td>
					<td><div class="day"></div></td>
					<td><div class="day"></div></td>
					<td><div class="day"></div></td>
				</tr>
			</table>
		</div>
</template>		
		<script type="text/javascript">
			var YEAR = 2014;
			var SESS = 'FA';
			var DB_PREFIX = 'scheduler_';
		</script>
		
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.0rc3/angular.min.js"></script>
		<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.0rc3/angular-route.min.js"></script>
		<script type="text/javascript" src="app.js"></script>
		<script type="text/javascript" src="catalog.js"></script>
		<script type="text/javascript" src="data.js"></script>
		<!--script type="text/javascript" src="scheduler.js"></script-->
	</body>
</html>
